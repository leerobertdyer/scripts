# Commits and pushes work journal changes to git
# Run this to sync your tasks to your private repo

# Check if WORK_JOURNAL_DIR is set
if [ -z "$WORK_JOURNAL_DIR" ]; then
  echo "Error: WORK_JOURNAL_DIR is not set."
  echo "Add 'export WORK_JOURNAL_DIR=~/path/to/work-journal' to your ~/.zshrc"
  exit 1
fi

# Check if directory exists
if [ ! -d "$WORK_JOURNAL_DIR" ]; then
  echo "Error: Work journal directory not found at $WORK_JOURNAL_DIR"
  exit 1
fi

cd "$WORK_JOURNAL_DIR"

# Check if there are changes to commit
if [ -z "$(git status --porcelain)" ]; then
  echo "No changes to commit."
  exit 0
fi

# Show what will be committed
echo "Changes to be committed:"
git status --short
echo ""

# Commit and push
git add .
git commit -m "task update $(date +%Y-%m-%d)"
git push

echo ""
echo "Work journal synced successfully!"

